import 'package:flutter_app/json_parsing.dart';
import 'package:flutter_test/flutter_test.dart';

void main() {
  test("parses topstories.json",() {
    const jsonString = "[24777268,24778073,24776771,24777640,24777671,24777115,24778879,24775500,24775556,24775305,24776748,24778403,24777360,24774214,24778490,24776115,24776605,24777372,24775216,24773462,24770566,24777099,24773546,24778920,24776329,24770617,24777027,24776085,24775088,24771005,24774947,24764292,24775804,24770836,24764287,24776053,24748517,24764589,24771470,24763718,24775697,24771932,24770616,24778480,24774613,24771856,24759230,24770424,24767378,24773390,24763423,24772352,24777337,24771623,24768118,24766682,24775252,24776677,24776294,24763593,24776938,24775279,24762637,24765798,24775173,24770661,24759037,24764727,24775099,24774964,24775020,24771271,24776336,24761714,24758772,24763495,24777067,24763872,24763734,24765398,24763312,24753664,24774506,24771056,24776347,24774438,24774397,24768071,24763072,24762449,24774270,24771968,24762840,24764210,24766508,24753589,24767239,24768971,24748488,24758989,24751702,24763330,24764414,24770954,24767941,24773671,24754538,24773657,24768721,24765341,24774841,24761349,24762734,24765382,24759006,24765941,24764605,24762851,24762107,24757333,24763575,24772816,24773171,24773239,24759000,24764504,24763120,24775862,24761105,24755614,24772106,24765545,24754397,24772938,24760271,24763958,24759649,24772843,24764459,24753477,24762435,24772779,24761116,24764824,24762758,24765267,24764467,24765461,24762612,24775384,24765248,24775363,24745563,24764360,24759379,24769576,24764648,24760528,24770511,24759091,24753642,24746921,24761383,24758210,24759869,24750263,24760625,24751212,24763209,24764049,24763329,24753493,24771670,24748793,24751767,24762428,24768045,24763587,24775018,24759484,24757020,24775453,24756934,24747667,24751264,24745714,24753626,24770676,24769932,24746001,24759022,24753082,24766042,24767717,24755525,24770563,24774700,24754000,24767481,24751122,24758024,24750588,24767370,24774666,24745564,24754662,24759458,24761212,24751786,24752348,24751666,24752714,24763276,24768220,24771397,24749263,24762389,24749238,24771306,24766148,24769363,24761466,24753940,24746836,24768344,24753654,24769023,24772025,24763839,24747492,24772623,24765324,24770048,24754327,24756635,24767778,24752932,24753283,24760007,24754945,24759886,24753291,24766561,24758020,24756042,24772580,24767267,24772572,24761793,24752546,24762895,24760549,24761208,24751540,24758132,24766620,24750484,24766553,24753503,24756077,24766227,24753652,24752527,24747069,24775190,24746160,24761908,24772664,24773219,24763382,24765029,24747698,24772462,24750620,24764825,24762518,24758209,24764484,24754553,24753564,24764303,24751685,24766446,24756902,24773007,24772111,24746350,24756401,24770854,24764368,24761646,24754456,24769222,24772803,24768905,24746587,24770302,24758154,24751358,24767643,24766859,24761858,24746397,24747927,24765501,24771078,24745874,24771108,24751810,24769362,24748565,24760072,24745511,24759056,24758997,24747932,24764224,24756671,24771955,24771943,24750936,24757176,24751422,24774483,24756645,24746173,24769739,24771116,24755717,24754026,24766957,24767682,24755337,24753290,24755137,24745539,24754664,24745542,24773127,24766347,24761753,24750082,24759944,24746330,24759621,24759493,24749040,24759020,24758830,24750110,24765268,24767388,24758314,24772616,24770309,24760830,24758166,24767066,24754748,24749971,24766662,24756765,24756863,24753105,24749708,24769620,24756154,24755988,24749176,24755427,24755424,24755066,24769020,24760117,24768957,24746057,24758591,24768784,24768708,24754390,24754268,24750979,24768024,24756960,24762026,24766939,24767638,24746783,24762971,24748631,24757904,24767106,24753417,24756460,24763257,24760793,24760038,24751538,24762504,24752921,24758161,24767880,24773266,24747267,24761766,24758870,24769858,24747933,24757557,24765868,24748349,24759324,24759924,24763970,24759707,24760771,24763832,24747845,24747770,24756782,24759156,24763502,24761421,24763457,24761302,24759518,24745393,24751195,24760653,24758328,24746269,24751670,24759664,24746499,24759249,24746261,24759054,24762172,24747605,24761996,24758143,24756787,24748167,24757506,24757410,24756875,24761305,24751022,24760942,24760485,24761430,24773622,24759923,24762524,24746495,24756647,24759181,24746292,24758123,24750655,24747935,24750977,24746966,24749966,24756733,24749604,24755655,24755583,24750866,24750647,24748295,24750350,24762554,24752283,24746178,24746014,24757035,24751802,24751574,24745868,24759231,24750879,24764673,24749252,24748903,24761151,24745955,24760900,24747646,24747220,24745471,24747874,24752390,24746469,24746677,24762121,24751609,24754667,24756621,24756061]";

    expect(parseTopStories(jsonString).first, 24777268);
  });

  test("parses item.json",() {
    const jsonString = '{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8958,8884,8887,8869,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}';

    expect(parseArticle(jsonString).by, "dhouston");
  });
}